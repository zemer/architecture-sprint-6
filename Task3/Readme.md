# Task 3

## Проблематика

- Редкое обновление информации по продуктам и тарифам (15 минут и 1 сутки)
- Повышение частоты опросов сервиса ins-product-aggregator приведет к повышению нагрузки на него и внешние API
- Так как сервис ins-product-aggregator агрегирует данные от внешних API в синхронном запросе, то добавление новых внешних API приведет к замедлению работы, поломки всего запроса, если запросы к внешим API последовательны.
- Редкое обновление информации по всем оформленным страховкам

## Решение

- Сервис ins-product-aggregator должен генерить события в топик, если появилась новая информация по продуктам и тарифам. Чтобы уменьшить количество событий по продуктам и тарифам в сервисе ins-product-aggregator нужно организовать базу данных для хранения продуктов и тарифов, и отправлять события только, если произошли изменения. Здесь понадобится паттерн Transaction outbox
- Сервисы core-app и ins-comp-settlement становятся косьюмерами топика продуктов и тарифов
- Сервис core-app отправляет в топик оформленные страховки. Здесь нужно применить паттерн Transaction outbox.
- Сервис ins-comp-settlement принимает оформленные страховки
